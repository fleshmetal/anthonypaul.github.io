import * as prismic from "@prismicio/client";
/**
 * Configures a Prismic client to automatically query draft content during a
 * preview session.
 *
 * @param config - Configuration for the function.
 */
export const enableAutoPreviews = (config) => {
    if (!config.cookies) {
        return;
    }
    const cookie = config.cookies.get(prismic.cookie.preview);
    // We only return the cookie if a Prismic Preview session is active.
    //
    // An inactive cookie looks like this (URL encoded):
    // 	{
    // 		"_tracker": "abc123"
    // 	}
    //
    // An active cookie looks like this (URL encoded):
    // 	{
    // 		"_tracker": "abc123",
    // 		"example-prismic-repo.prismic.io": {
    // 			preview: "https://example-prismic-repo.prismic.io/previews/abc:123?websitePreviewId=xyz"
    // 		}
    // 	}
    if (cookie && /\.prismic\.io/.test(cookie)) {
        config.client.queryContentFromRef(cookie);
    }
};
