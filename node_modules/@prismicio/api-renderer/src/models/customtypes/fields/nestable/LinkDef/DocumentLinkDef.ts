import type { LinkConfig } from "@prismicio/types-internal/lib/customtypes"
import * as t from "io-ts"

export const DocumentLinkDef = t.intersection([
	t.strict({
		select: t.literal("document"),
		customtypes: t.readonlyArray(t.string),
	}),
	t.partial({
		allowText: t.boolean,
		repeat: t.boolean,
	}),
])

export type DocumentLinkDef = t.TypeOf<typeof DocumentLinkDef>

export function defaultDocumentLinkDef(config?: Omit<LinkConfig, "select" | "customtypes">): DocumentLinkDef {
	return {
		select: "document",
		customtypes: [],
		allowText: true,
		...config,
	}
}
