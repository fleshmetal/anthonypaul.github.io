"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[764],{5726:function(e,t,l){l.d(t,{F:function(){return Z}});var r=l(52322),n=l(7729),a=l(97729),s=l.n(a),c=l(2784),i=l(23335),o=l(30988),d=l(77507),u=l(5335),x=l(5632),h=l(56580),p=l(75289),j=l(93216),m=l(88932),g=l(93188),f=l(91133);async function v(e){let{id:t,label:l,repeatable:r,format:n,onSuccess:a}=e,s=d.$[n],c=(0,j.Ue)({id:t,label:l,repeatable:r,format:n});try{let{errors:e}=await (0,g.KA)(c);if(e.length>0)throw e;g.Xe.track({event:"custom-type:created",id:c.id,name:l,format:n,type:r?"repeatable":"single",origin:"table"}),await a(c),m.Am.success((0,f.GX)({message:"".concat(s.name({start:!0,plural:!1})," saved successfully at "),path:"./customtypes/".concat(c.id,"/index.json")}))}catch(t){let e="Internal Error: ".concat(s.name({start:!0,plural:!1})," not saved");console.error(e,t),m.Am.error(e)}}var b=l(63447),y=l(65856),C=l(80546),S=l(1490),w=l(17186),k=l(99510),I=l(40572),T=l(41067),R=l(28801),z=l(63397);let L=e=>{let{selected:t,...l}=e;return(0,r.jsx)(p.kC,{sx:{p:"24px",mb:3,alignItems:"top",cursor:"pointer",borderRadius:"6px",backgroundColor:"grayLight",boxShadow:t?e=>{var t;return"0 0 0 2px ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.primary))}:"none","&:hover":{boxShadow:e=>{var t;return"0 0 0 2px ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.primary))}}},...l})},_=e=>{let{format:t}=e,[l,,n]=(0,z.U$)("repeatable"),a=d.$[t];return(0,r.jsxs)(p.xu,{mb:2,children:[(0,r.jsxs)(L,{selected:l.value,onClick:()=>n.setValue(!0),children:[(0,r.jsx)(p.Y8,{checked:l.value,onChange:()=>{},"data-testid":"repeatable-type-radio-btn"}),(0,r.jsxs)(p.xu,{sx:{marginLeft:2},children:["Reusable type",(0,r.jsx)(p.xu,{as:"p",sx:{fontSize:"12px",color:"textClear",mt:1},children:a.hintRepeatable})]})]}),(0,r.jsxs)(L,{selected:!l.value,onClick:()=>n.setValue(!1),children:[(0,r.jsx)(p.Y8,{checked:!l.value,onChange:()=>{},"data-testid":"single-type-radio-btn"}),(0,r.jsxs)(p.xu,{sx:{marginLeft:2},children:["Single type",(0,r.jsx)(p.xu,{as:"p",sx:{fontSize:"12px",color:"textClear",mt:1},children:a.hintSingle})]})]})]})},N=e=>{let{format:t,isCreating:l,isOpen:n,origin:a="table",onCreateChange:s,onOpenChange:i}=e,{createCustomTypeSuccess:o}=(0,T.Z)(),{completeStep:u}=(0,y.k)(),{customTypeIds:m,customTypeLabels:g}=(0,h.v9)(e=>({customTypeIds:(0,I.W6)(e),customTypeLabels:(0,I.YS)(e)})),f=d.$[t],[z,L]=(0,c.useState)(!0),{syncChanges:N}=(0,C.g)(),A=(0,x.useRouter)(),P=async e=>{let{id:l,label:r,repeatable:n}=e;s(!0),await v({format:t,id:l,label:r,origin:a,repeatable:n,onSuccess:async e=>{o(e);let t=(0,j.y6)(e),r=b.cd[t];L(!0),await A.push({pathname:r.getBuilderPagePathname(l)}),N(),"page"===t&&u("createPageType")}}),s(!1),i(!1)},D=(e,t,l)=>{l(z?{...t,label:e.target.value,id:(0,k.lV)(e.target.value)}:{...t,label:e.target.value})},$=(e,t)=>{t("id",e.target.value),L(!1)};return(0,r.jsx)(S.Z,{testId:"create-ct-modal",isOpen:n,widthInPx:"530px",formId:"create-custom-type",buttonLabel:"Create",close:()=>{i(!1),L(!0)},onSubmit:e=>{P(e)},isLoading:l,initialValues:{repeatable:!0,id:"",label:""},validate:e=>{let{id:t,label:l}=e,r={};return l&&l.length||(r.label="Cannot be empty."),!r.label&&g.includes(l)&&(r.label="".concat(f.name({start:!0,plural:!1})," name is already taken.")),["update","insert"].includes(l.toLowerCase())&&(r.label='Name "'.concat(l,'" is reserved for Slice Machine use.')),t&&t.length||(r.id="ID cannot be empty."),["update","insert"].includes(t.toLowerCase())&&(r.id='Id "'.concat(t,'" is reserved for Slice Machine use.')),r.id||!t||w.xo.exec(t)||(r.id="Invalid id: No special characters allowed."),!r.id&&t&&m.map(e=>e.toLowerCase()).includes(t)&&(r.id='ID "'.concat(t,'" exists already.')),Object.keys(r).length>0?r:void 0},content:{title:"Create a new ".concat(f.name({start:!1,plural:!1}))},children:e=>{let{errors:l,setValues:n,setFieldValue:a,values:s,touched:c}=e;return(0,r.jsxs)(p.xu,{children:[(0,r.jsx)(_,{format:t}),(0,r.jsx)(R.W,{name:"label",label:"".concat(f.name({start:!0,plural:!1})," Name"),testId:"ct-name-input",placeholder:"A display name for the ".concat(f.name({start:!1,plural:!1})),error:c.label?l.label:void 0,onChange:e=>D(e,s,n)}),(0,r.jsx)(R.W,{name:"id",testId:"ct-id-input",label:"".concat(f.name({start:!0,plural:!1})," ID"),placeholder:f.inputPlaceholder,error:c.id?l.id:void 0,onChange:e=>$(e,a)})]})}})};var A=l(28574);let P=e=>(0,r.jsxs)("svg",{viewBox:"0 0 20 24",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,r.jsx)("path",{d:"m2 24h16c1.1046 0 2-.8954 2-2v-17l-5-5h-13c-1.10457 0-2 .89543-2 2v20c0 1.1046.89543 2 2 2z",fill:"#6e56cf"}),(0,r.jsx)("path",{d:"m17 5h3l-5-5v3c0 1.10457.8954 2 2 2z",fill:"#9e8cfc"}),(0,r.jsx)("path",{d:"m10.0912 8c-2.8118 0-5.0912 2.2794-5.0912 5.0912s2.2794 5.0912 5.0912 5.0912c1.8851 0 3.5303-1.0247 4.4098-2.5452.1553-.2684.2868-.5523.3916-.8489.092-.2604-.0444-.5461-.3048-.6381-.2603-.092-.546.0445-.638.3048-.0841.238-.1897.4659-.3144.6815-.7081 1.2241-2.0305 2.0459-3.5442 2.0459-2.2595 0-4.0912-1.8317-4.0912-4.0912s1.8317-4.0912 4.0912-4.0912c1.3566 0 2.5595.66 3.3043 1.6782h-1.7739c-.2761 0-.5.2239-.5.5 0 .2762.2239.5.5.5h2.6782c.2762 0 .5-.2238.5-.5v-2.6782c0-.2761-.2238-.5-.5-.5-.2761 0-.5.2239-.5.5v1.1032c-.9281-.9865-2.2462-1.6032-3.7086-1.6032z",fill:"#fff"})]}),D=e=>(0,r.jsxs)("svg",{viewBox:"0 0 20 24",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,r.jsx)("path",{d:"m2 24h16c1.1046 0 2-.8954 2-2v-17l-5-5h-13c-1.10457 0-2 .89543-2 2v20c0 1.1046.89543 2 2 2z",fill:"#6e56cf",fillRule:"nonzero"}),(0,r.jsx)("path",{d:"m17 5h3l-5-5v3c0 1.10457.8954 2 2 2z",fill:"#9e8cfc",fillRule:"nonzero"}),(0,r.jsx)("path",{d:"m8.0869 10.6818.5758-2.3031c.0556-.2226.2556-.3787.485-.3787.3253 0 .564.3057.4851.6213l-.5151 2.0605h2.6055l.5758-2.3031c.0557-.2226.2557-.3787.4851-.3787.3253 0 .564.3057.4851.6213l-.5152 2.0605h2.246c.2761 0 .5.2239.5.5 0 .2762-.2239.5-.5.5h-2.496l-.6591 2.6364h2.1551c.2761 0 .5.2238.5.5 0 .2761-.2239.5-.5.5h-2.4051l-.5757 2.3031c-.0557.2226-.2557.3787-.4851.3787-.3253 0-.564-.3057-.4851-.6213l.5152-2.0605h-2.6056l-.5758 2.3031c-.0556.2226-.2556.3787-.4851.3787-.3253 0-.5639-.3057-.485-.6213l.5151-2.0605h-1.9278c-.2761 0-.5-.2239-.5-.5 0-.2762.2239-.5.5-.5h2.1778l.6591-2.6364h-1.8369c-.2761 0-.5-.2238-.5-.5 0-.2761.2239-.5.5-.5zm2.7273 3.6364.659-2.6364h-2.6055l-.6591 2.6364z",fill:"#fff"})]});var $=l(64910),E=l(18566),M=l(95799),O=l(1744),W=l(70647);async function B(e){let{errors:t,models:l}=await W.managerClient.customTypes.readAllCustomTypes({format:e});if(t.length>0)throw t;return l.map(e=>{let{model:t}=e;return t})}let V=e=>{let{format:t,isCreatingCustomType:l,openCreateCustomTypeModal:a}=e,s=(0,x.useRouter)(),{customTypes:i,updateCustomTypes:o}=function(e){let t=(0,c.useCallback)(t=>(0,E.VA)(B,[e],t),[e]);return{customTypes:(0,E.QT)(B,[e]),updateCustomTypes:t}}(t),u=i.sort((e,t)=>e.id.localeCompare(t.id)),p=b.cd[t],j=d.$[t];return(!function(e,t,l){let{storeCustomTypes:r}=(0,h.v9)(e=>({storeCustomTypes:(0,I.Ch)(e).filter(O.TG)}));(0,c.useEffect)(()=>{let n=r.filter(e=>{let{local:l}=e;return l.format===t});(n.length!==e.length||n.some(t=>{let l=e.find(e=>e.id===t.local.id);return!l||JSON.stringify(M.Dc.fromSM(t.local))!==JSON.stringify(l)}))&&l(n.map(e=>{let{local:t}=e;return M.Dc.fromSM(t)}))},[t,l,e,r])}(i,t,o),0===u.length)?(0,r.jsxs)(A.R$,{"data-testid":"blank-slate",style:{alignSelf:"center",marginTop:n.rSc.space[72]},children:[(0,r.jsx)(A.u2,{children:(0,r.jsx)(n.Eep,{src:p.blankSlateImage,sizing:"cover"})}),(0,r.jsxs)(A.T9,{children:[(0,r.jsx)(A._T,{children:j.name({start:!0,plural:!0})}),(0,r.jsx)(A.nf,{children:j.blankSlateDescription}),(0,r.jsx)(A.Qj,{children:(0,r.jsx)(n.zxk,{onClick:a,loading:l,children:"Create"})})]})]}):(0,r.jsx)("div",{children:(0,r.jsxs)(n.iA_,{columnLayout:"28px 1fr 1fr 1fr 42px",children:[(0,r.jsx)(n.ssF,{children:(0,r.jsxs)(n.SCH,{children:[(0,r.jsx)(n.pj1,{children:(0,r.jsx)(n.JO$,{name:"notes",size:"medium"})}),(0,r.jsx)(n.pj1,{children:(0,r.jsx)(n.xvT,{color:"grey11",variant:"small",children:"Label"})}),(0,r.jsx)(n.pj1,{children:(0,r.jsx)(n.xvT,{color:"grey11",variant:"small",children:"API ID"})}),(0,r.jsx)(n.pj1,{children:(0,r.jsx)(n.xvT,{color:"grey11",variant:"small",children:"Limit"})}),(0,r.jsx)(n.pj1,{})]})}),(0,r.jsx)(n.RMI,{children:u.map(e=>{let{repeatable:l,label:a,id:c}=e;return(0,r.jsxs)(n.SCH,{onClick:()=>{s.push(b.cd[t].getBuilderPagePathname(c))},children:[(0,r.jsx)(n.pj1,{children:l?(0,r.jsx)(P,{width:n.rSc.space[20]}):(0,r.jsx)(D,{width:n.rSc.space[20]})}),(0,r.jsx)(n.pj1,{children:(0,r.jsx)(n.xvT,{variant:"bold",noWrap:!0,children:a})}),(0,r.jsx)(n.pj1,{children:(0,r.jsx)(n.xvT,{color:"grey11",noWrap:!0,children:c})}),(0,r.jsx)(n.pj1,{children:(0,r.jsx)(n.xvT,{color:"grey11",noWrap:!0,children:l?"Reusable":"Single"})}),(0,r.jsx)(n.pj1,{children:(0,r.jsx)($._,{isChangesLocal:!1,format:t,customType:e})})]},c)})})]})})},Z=e=>{let{format:t}=e,l=d.$[t],[a,x]=(0,c.useState)(!1),[h,p]=(0,c.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s(),{children:(0,r.jsxs)("title",{children:[l.name({start:!0,plural:!0})," - Slice Machine"]})}),(0,r.jsx)(o.S,{renderError:()=>(0,r.jsx)(u.LN,{children:(0,r.jsx)(u.RN,{children:(0,r.jsx)(n.xuv,{alignItems:"center",justifyContent:"center",children:(0,r.jsx)(n.Iq8,{title:"Request failed",description:"An error occurred while fetching your ".concat(l.name({start:!1,plural:!0}),".")})})})}),children:(0,r.jsx)(c.Suspense,{fallback:(0,r.jsxs)(u.LN,{children:[(0,r.jsxs)(u.wd,{children:[(0,r.jsx)(u.Cx,{children:(0,r.jsx)(i.g,{children:l.name({start:!0,plural:!0})})}),(0,r.jsx)(u.K2,{children:(0,r.jsx)(n.zxk,{disabled:!0,startIcon:"add",children:"Create"})})]}),(0,r.jsx)(u.RN,{children:(0,r.jsx)(n._3P,{})})]}),children:(0,r.jsxs)(u.LN,{children:[(0,r.jsxs)(u.wd,{children:[(0,r.jsx)(u.Cx,{children:(0,r.jsx)(i.g,{children:l.name({start:!0,plural:!0})})}),(0,r.jsx)(u.K2,{children:(0,r.jsx)(n.zxk,{"data-testid":"create-ct",loading:a,onClick:()=>{p(!0)},startIcon:"add",children:"Create"})})]}),(0,r.jsx)(u.RN,{children:(0,r.jsxs)(n.xuv,{flexDirection:"column",children:[(0,r.jsx)(V,{format:t,isCreatingCustomType:a,openCreateCustomTypeModal:()=>{p(!0)}}),(0,r.jsx)(N,{format:t,isCreating:a,isOpen:h,onCreateChange:x,onOpenChange:p})]})})]})})})]})}},76805:function(e,t,l){l.d(t,{Z:function(){return o},W:function(){return i}});var r=l(52322),n=l(2784),a=l(75289);let s=e=>{let{bg:t,background:l,sx:n,withRadius:s,radius:c,children:i}=e;return(0,r.jsx)(a.xu,{sx:{p:4,bg:t||l,...s?{borderBottomLeftRadius:c,borderBottomRightRadius:c}:null,...n},children:i})},c=(0,n.createContext)("6px"),i=()=>(0,n.useContext)(c),o=e=>{let{Header:t=null,SubHeader:l=null,Body:n=null,Footer:i=null,borderFooter:o=!1,radius:d="6px",bodySx:u={},footerSx:x={},sx:h=null,bg:p,background:j,children:m,...g}=e;return(0,r.jsx)(c.Provider,{value:d,children:(0,r.jsxs)(a.Zb,{sx:{border:e=>{var t;return"1px solid ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.borders))},borderRadius:d,...h},...g,children:[t||null,l||null,(0,r.jsxs)(s,{bg:p,background:j,sx:u,withRadius:!i,children:[n?(0,r.jsx)(n,{}):null,m||null]}),i?(0,r.jsx)(s,{bg:p,background:j,sx:{...o?{borderTop:e=>{let{colors:t}=e;return"1px solid ".concat(String(null==t?void 0:t.borders))}}:null,...x},radius:d,withRadius:!0,children:"object"==typeof i?i:(0,r.jsx)(i,{})}):null]})})}},17186:function(e,t,l){l.d(t,{Sn:function(){return c},lS:function(){return r},nG:function(){return n},pq:function(){return i},rd:function(){return s},xo:function(){return a}});let r=["components","update","insert"],n=["png","jpg","jpeg"],a=/^[A-Za-z0-9]+(?:_[A-Za-z0-9]+)*$/,s="placeholders/What_are_Slices_mrvome",c="SM_HELP_VIDEOS/mock_data",i="slice-machine-simulator"}}]);