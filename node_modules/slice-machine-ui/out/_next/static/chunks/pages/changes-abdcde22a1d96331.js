(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[849],{21985:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/changes",function(){return n(79566)}])},28574:function(e,t,n){"use strict";n.d(t,{R$:function(){return a},Qj:function(){return h},T9:function(){return d},nf:function(){return x},u2:function(){return c},_T:function(){return u}});var i=n(52322),s=n(7729),r=n(6277),l=n(43217),o=n.n(l);let a=e=>{let{backgroundImage:t,style:n,...s}=e,l=void 0!==t;return(0,i.jsx)("article",{...s,className:(0,r.W)(o().root,{[o().withBackground]:l}),style:{backgroundImage:l?"url(".concat(t,")"):void 0,...n}})},c=e=>(0,i.jsx)("div",{...e,className:o().image}),d=e=>(0,i.jsx)("div",{...e,className:o().content}),u=e=>(0,i.jsx)(s.xvT,{...e,variant:"h3"}),x=e=>(0,i.jsx)(s.xvT,{...e,color:"grey11"}),h=e=>(0,i.jsx)("div",{...e,className:o().actions,color:"grey"})},68587:function(e,t,n){"use strict";n.d(t,{Q:function(){return l}});let i={GitHub:"gitHub"};var s=n(52322),r=n(70647);let l={gitHub:{connect:async()=>await o("gitHub"),Icon:e=>(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,s.jsx)("path",{d:"M12 4C7.57486 4 4 7.57486 4 12C4 15.5246 6.30057 18.5257 9.47429 19.6C9.87429 19.6754 10.0251 19.4251 10.0251 19.2251V17.8754C7.8 18.3497 7.32457 16.8 7.32457 16.8C6.94971 15.8743 6.42514 15.6251 6.42514 15.6251C5.70057 15.1246 6.47543 15.1497 6.47543 15.1497C7.27543 15.2 7.69943 15.9749 7.69943 15.9749C8.42514 17.2 9.57486 16.8503 10.0251 16.6491C10.1006 16.1246 10.2994 15.7749 10.5246 15.5749C8.74971 15.3749 6.87543 14.6754 6.87543 11.6251C6.87543 10.7497 7.17486 10.0503 7.69943 9.47543C7.62514 9.27543 7.34971 8.45029 7.77486 7.34971C7.77486 7.34971 8.44914 7.12457 9.97486 8.17486C10.6266 7.99627 11.2991 7.90405 11.9749 7.90057C12.6491 7.90057 13.3497 8 13.9749 8.17486C15.5006 7.14971 16.1749 7.34971 16.1749 7.34971C16.6 8.45029 16.3246 9.27543 16.2503 9.47543C16.776 10.024 17.0754 10.7497 17.0754 11.624C17.0754 14.6994 15.2 15.3749 13.4251 15.5749C13.6994 15.8251 13.9749 16.2994 13.9749 17.0491V19.2503C13.9749 19.4754 14.1246 19.7246 14.5246 19.6251C17.7006 18.5246 20 15.5246 20 12C20 7.57486 16.4251 4 12 4Z",fill:"currentColor"})}),name:"GitHub",supported:a("gitHub")},bitbucket:{connect:async()=>await o("bitbucket"),Icon:e=>(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.77596 5.47599C4.84147 5.44648 4.91265 5.43167 4.9845 5.4326L19.3525 5.43506C19.4243 5.43413 19.4955 5.44894 19.561 5.47845C19.6265 5.50796 19.6848 5.55146 19.7317 5.60588C19.7786 5.6603 19.8131 5.72433 19.8326 5.79348C19.8521 5.86262 19.8563 5.93521 19.8448 6.00614L19.1802 10.0751H9.71803L10.5722 14.6018H11.1162L11.1162 14.6018H13.7846L14.56 10.0751H19.1803L17.7575 18.8357C17.7387 18.9522 17.6786 19.058 17.5882 19.1339C17.4979 19.2098 17.3832 19.2507 17.2652 19.2492H7.23692C7.2134 19.249 7.19001 19.2476 7.16682 19.2449C7.03392 19.2298 6.90803 19.175 6.80603 19.0868C6.68704 18.9851 6.60772 18.8448 6.58203 18.6904L4.49219 6.00367C4.48069 5.93275 4.48485 5.86016 4.50438 5.79102C4.52392 5.72187 4.55835 5.65784 4.60527 5.60342C4.65218 5.54899 4.71044 5.5055 4.77596 5.47599Z",fill:"currentColor"})}),name:"Bitbucket",supported:a("bitbucket")},gitLab:{connect:async()=>await o("gitLab"),Icon:e=>(0,s.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.7881 10.5954L16.5431 5.20756C16.6328 4.93081 17.0594 4.93081 17.1492 5.20756L18.9076 10.5954H14.7881ZM6.6192 5.20756L4.86353 10.5954H8.97968L7.22468 5.20756C7.1349 4.93081 6.70898 4.93081 6.6192 5.20756ZM4.0299 13.2981L4.86352 10.5954H4.86353H8.979H14.7881H18.9076L19.7392 13.2981C19.7796 13.4207 19.7802 13.553 19.7408 13.676C19.7014 13.799 19.624 13.9063 19.5198 13.9826L11.893 19.5257L11.8879 19.5319L11.8923 19.5378L11.8865 19.5336L11.8835 19.5371L11.8852 19.5326L4.24927 13.9826C4.0299 13.8246 3.95092 13.5458 4.0299 13.2981Z",fill:"currentColor"})}),name:"GitLab",supported:a("gitLab")}};async function o(e){if(!a(e))throw Error("Not implemented.");let t=await r.managerClient.git.getProviderAppInstallURL({provider:e});window.open(t,"git-provider-app-installation")}function a(e){return!!Object.values(i).includes(e)}},6407:function(e,t,n){"use strict";n.d(t,{G:function(){return l}});var i=n(18566),s=n(29806),r=n(70647);function l(){let[e]=(0,s.f)();return{linkedGitRepos:(0,i.QT)(o,[e.repositoryName]),linkRepo:async t=>{await r.managerClient.git.linkRepo({prismic:{domain:e.repositoryName},git:t}),await (0,i.gw)(o,[e.repositoryName])},unlinkRepo:async t=>{await r.managerClient.git.unlinkRepo({prismic:{domain:e.repositoryName},git:t}),await (0,i.gw)(o,[e.repositoryName])}}}async function o(e){return await r.managerClient.git.fetchLinkedRepos({prismic:{domain:e}})}},29806:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var i=n(18566),s=n(70647);function r(){return[(0,i.QT)(l,[]),async e=>{await s.managerClient.project.writeSliceMachineConfig({config:e}),(0,i.VA)(l,[],e)}]}async function l(){return s.managerClient.project.getSliceMachineConfig()}},47861:function(e,t,n){"use strict";n.d(t,{z:function(){return a}});var i=n(52322),s=n(2784),r=n(75289);let l=(e,t)=>e?"".concat(e,"-").concat(t):"",o=e=>{switch(e){case"white":case"secondaryMedium":case"secondarySmall":case"secondary":return"#1A1523";default:return"grey01"}},a=(0,s.forwardRef)((e,t)=>{let{label:n,Icon:s,type:a,form:c,isLoading:d=!1,disabled:u=!1,onClick:x,sx:h={},iconSize:m=16,iconFill:g,variant:p="primary",...j}=e;return(0,i.jsx)(r.zx,{ref:t,sx:{...h,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",...d?{cursor:"wait !important"}:{}},type:a,form:c,disabled:u||d,onClick:d?void 0:x,variant:p,...j,children:d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.$j,{size:m,color:o(p),"data-testid":l(j["data-testid"],"spinner")}),s&&n]}):(0,i.jsxs)(i.Fragment,{children:[s&&(0,i.jsx)(s,{size:m,fill:g,"data-testid":l(j["data-testid"],"icon")}),n]})})})},42849:function(e,t,n){"use strict";var i=n(52322),s=n(75289);t.Z=function(e){let{elems:t,renderElem:n,defineElementKey:r,gridTemplateMinPx:l="320px",gridGap:o="16px",sx:a}=e;return(0,i.jsx)(s.xu,{as:"section",sx:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(".concat(l,", 1fr))"),gridGap:o,pt:2,...a},children:t.map((e,t)=>e?(0,i.jsx)("span",{children:n(e,t)},"".concat(r(e),"-").concat(t+1)):null)})}},79566:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ep}});var i=n(52322),s=n(7729),r=n(97729),l=n.n(r),o=n(5632),a=n(2784),c=n(88932),d=n(65077),u=n(93188),x=n(23335),h=n(28574);function m(e){let{isPostPush:t,documentsListEndpoint:n}=e,r=t?p:g;return(0,i.jsxs)(h.R$,{style:{alignSelf:"center",marginTop:s.rSc.space[72]},children:[(0,i.jsx)(h.u2,{children:(0,i.jsx)(s.Eep,{src:r.img,sizing:"cover"})}),(0,i.jsxs)(h.T9,{children:[(0,i.jsx)(h._T,{children:r.title}),(0,i.jsx)(h.nf,{children:r.description}),t&&(0,i.jsx)(h.Qj,{children:(0,i.jsx)(s.zxk,{onClick:()=>{u.Xe.track({event:"post-push:empty-state-cta-clicked"}),window.open(n,"_blank")},size:"large",children:"Create content in the Page Builder"})})]})]})}let g={img:"/blank-slate-changes-uptodate.png",title:"Everything is up-to-date",description:"No changes are staged. Saved updates will appear here, ready to be pushed to the Page Builder."},p={img:"/blank-slate-push-success.png",title:"Success! Your changes have been pushed to the Page Builder.",description:"Add content to your website to bring it to life!"};var j=n(30988),f=n(68587),v=n(52677),y=n(6407);let C=e=>(0,i.jsx)(j.S,{renderError:S,children:(0,i.jsx)(a.Suspense,{fallback:(0,i.jsx)(T,{}),children:(0,i.jsx)(b,{...e})})}),b=e=>(0,v.M)().eligible?(0,i.jsx)(w,{...e}):(0,i.jsx)(k,{...e}),w=e=>{let{linkedGitRepos:t}=(0,y.G)();if(!(t.length>0))return(0,i.jsx)(k,{...e});{let e=f.Q[t[0].provider];return(0,i.jsx)(s.ua7,{content:"This project uses the Git workflow. Update Prismic by pushing your changes to ".concat(e.name,"."),side:"bottom",children:(0,i.jsx)(k,{disabled:!0})})}},k=(0,a.forwardRef)((e,t)=>(0,i.jsx)(s.zxk,{...e,ref:t,startIcon:"upload",children:"Push"}));function S(){return(0,i.jsx)(s.ua7,{content:"An error occurred while fetching the list of connected Git repositories.",side:"bottom",children:(0,i.jsx)(k,{disabled:!0})})}let T=()=>(0,i.jsx)(s.OdW,{height:32,width:71.32});var _=n(65856),D=n(6529),L=n(80546),R=n(65821),B=n(52762),O=n(85647),I=n(99579),N=n(5335),F=n(58161),H=n(41067);let E=e=>{let{authStatus:t}=e,{openLoginModal:n}=(0,H.Z)();return(0,i.jsxs)(s.xuv,{flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center",gap:8,children:[t===F.t.FORBIDDEN?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.xvT,{variant:"h3",align:"center",children:"It seems like you are logged out"}),(0,i.jsx)(s.xvT,{align:"center",children:"Log in to connect to your repository."})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.xvT,{variant:"h3",align:"center",children:"It seems like you don't have access to this repository"}),(0,i.jsx)(s.xvT,{align:"center",children:"Check that the repository name is correct, then contact your repository administrator."})]}),(0,i.jsxs)(s.xvT,{align:"center",children:["If that doesn't work, it's possible that Slice Machine is having trouble accessing Prismic's servers."," ",(0,i.jsx)(s.xvT,{href:"https://community.prismic.io/",children:"Contact our support team"}),"."]}),t===F.t.FORBIDDEN&&(0,i.jsx)(s.zxk,{onClick:()=>n(),children:"Log in to Prismic"})]})};var z=n(91914),P=n(75289);let A=()=>(0,i.jsx)(P.kC,{sx:{justifyContent:"center",alignItems:"center",flex:1},children:(0,i.jsxs)(P.kC,{sx:{flexDirection:"column",alignItems:"center",transform:"translateY(-50%)"},children:[(0,i.jsx)(z.wQ1,{size:48}),(0,i.jsx)(P.xv,{sx:{fontWeight:600,fontSize:"24px",lineHeight:"32px",mb:"8px",mt:"2px",textAlign:"center"},children:"No internet connection"}),(0,i.jsx)(P.xv,{sx:{fontSize:"13px",lineHeight:"24px",textAlign:"center"},children:"Connect to the internet to sync your changes."})]})});var Z=n(951),G=n(3181),M=n(53850),W=n(76787);let X=e=>{let{children:t}=e;return(0,i.jsx)(P.kC,{sx:{alignItems:"center",justifyContent:"space-between",mt:"8px",bg:"grey02",borderRadius:4,padding:"12px 16px",width:"100%"},children:t})};var U=n(39097),Q=n.n(U),Y=n(51159),V=n(63447),J=n(1744);let q=e=>{let{ct:t,status:n,authStatus:s,isOnline:r}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.xu,{as:"td",style:{width:"40%"},children:(0,i.jsx)(P.xv,{sx:{fontWeight:500},children:t.label})}),(0,i.jsx)(P.xu,{as:"td",style:{width:"40%"},children:t.id}),(0,i.jsx)(P.xu,{as:"td",style:{width:"20%"},children:(0,i.jsx)(Y.O,{authStatus:s,isOnline:r,modelStatus:n,modelType:"CustomType"})})]})},K=e=>{let{customTypes:t,modelsStatuses:n,authStatus:s,isOnline:r}=e;return(0,i.jsxs)(P.xu,{as:"table","data-legacy-component":!0,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:"transparent small",children:[(0,i.jsx)(P.xu,{as:"th",sx:{width:"40%",fontWeight:600},children:"Name"}),(0,i.jsx)(P.xu,{as:"th",sx:{width:"40%",fontWeight:600},children:"API ID"}),(0,i.jsx)(P.xu,{as:"th",sx:{width:"20%",fontWeight:600},children:"Status"})]})}),(0,i.jsx)("tbody",{children:t.map(e=>(0,J.TG)(e)?(0,i.jsx)(Q(),{passHref:!0,href:V.cd[e.local.format].getBuilderPagePathname(e.local.id),legacyBehavior:!0,children:(0,i.jsx)("tr",{tabIndex:0,"data-testid":"custom-type-".concat(e.local.id),children:(0,i.jsx)(q,{ct:e.local,status:n.customTypes[e.local.id],authStatus:s,isOnline:r},e.local.id)})},e.local.id):(0,i.jsx)("tr",{tabIndex:0,className:"disabled","data-testid":"custom-type-".concat(e.remote.id),children:(0,i.jsx)(q,{ct:e.remote,status:n.customTypes[e.remote.id],authStatus:s,isOnline:r},e.remote.id)},e.remote.id))})]})};var $=n(42849),ee=n(39283),et=n(5274),en=n(53085);function ei(){let e=(0,en.L)("slicemachine-dev-collaboration"),[t,n]=(0,a.useState)(!1),r=null==e?void 0:e.payload;return((0,a.useEffect)(()=>{(null==e?void 0:e.value)==="on"&&void 0!==r&&u.Xe.track({event:"dev-collab:workflow-stub-displayed"})},[e,r]),(null==e?void 0:e.value)!=="on"||void 0===r)?null:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.xuv,{alignItems:"flex-start",border:{bottom:!0,left:!0,right:!0,top:!0},borderRadius:6,borderStyle:"dashed",flexDirection:"column",flexShrink:0,gap:8,padding:16,width:320,children:[(0,i.jsxs)(s.xuv,{flexDirection:"column",gap:2,children:[(0,i.jsx)(s.xvT,{variant:"smallBold",children:r.cardTitle}),(0,i.jsx)(s.xvT,{color:"grey11",variant:"small",children:r.cardDescription})]}),(0,i.jsx)(s.zxk,{color:"grey",onClick:()=>{u.Xe.track({event:"dev-collab:set-up-workflow-opened"}),n(!0)},children:r.cardButtonLabel})]}),(0,i.jsxs)(s.VqE,{onOpenChange:e=>{e||n(!1)},open:t,size:{height:"auto",width:448},children:[(0,i.jsx)(s.fKu,{title:r.dialogTitle}),(0,i.jsx)(s.cZJ,{children:(0,i.jsxs)(s.xuv,{flexDirection:"column",children:[(0,i.jsx)(s.xuv,{flexDirection:"column",padding:16,children:(0,i.jsx)(s.xvT,{children:r.dialogDescription})}),(0,i.jsxs)(s.kXR,{children:[(0,i.jsx)(s.POh,{size:"medium"}),(0,i.jsx)(s._dX,{size:"medium",onClick:()=>{u.Xe.track({event:"dev-collab:join-beta-clicked"}),window.open(r.dialogButtonLink,"_blank"),n(!1)},children:r.dialogButtonLabel})]})]})})]})]})}let es=e=>{let{unSyncedCustomTypes:t,unSyncedSlices:n,modelsStatuses:r,authStatus:l,isOnline:o}=e,{modalPayload:c,onOpenModal:d}=(0,W.H)(),{sliceFilterFn:u,defaultVariationSelector:x}=c,h=n.filter(e=>r.slices[e.model.id]!==et.GJ.Deleted);return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(s.xuv,{gap:16,alignItems:"flex-start",children:[(0,i.jsxs)(s.xuv,{flexDirection:"column",flexGrow:1,children:[t.length>0&&(0,i.jsxs)(s.xuv,{flexDirection:"column",children:[(0,i.jsx)(X,{children:(0,i.jsxs)(s.xuv,{children:[(0,i.jsx)(s.xvT,{variant:"h5",children:"Types"}),(0,i.jsx)(s.xvT,{variant:"h5",sx:{marginLeft:8},children:t.length})]})}),(0,i.jsx)(K,{customTypes:t,modelsStatuses:r,authStatus:l,isOnline:o})]}),n.length>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.xuv,{padding:{bottom:8},children:(0,i.jsxs)(X,{children:[(0,i.jsxs)(s.xuv,{children:[(0,i.jsx)(s.xvT,{variant:"h5",children:"Slices"}),(0,i.jsx)(s.xvT,{variant:"h5",sx:{marginLeft:8},children:n.length})]}),(0,i.jsxs)(s.xuv,{children:[n.some(e=>(0,G.cx)(e)>0&&r.slices[e.model.id]!==et.GJ.Deleted)&&(0,i.jsxs)(s.xvT,{color:"amber11",sx:{marginRight:8,alignSelf:"center"},children:[(0,i.jsx)(Z.sQg,{size:16,style:{marginRight:"4px",position:"relative",top:"3px"}}),"Missing Screenshots"]}),(0,i.jsxs)(s.zxk,{color:"dark",onClick:()=>d({sliceFilterFn:e=>e}),children:[(0,i.jsx)(Z.hOO,{style:{color:"#FFF",fontSize:"15px",position:"relative",top:"3px",marginRight:"4px"}})," ","Update all screenshots"]})]})]})}),(0,i.jsx)($.Z,{gridGap:"32px 16px",elems:n,gridTemplateMinPx:"305px",defineElementKey:e=>e.model.name,renderElem:e=>{let t=r.slices[e.model.id];return(0,i.jsx)(M.b,{action:{type:"status",authStatus:l,isOnline:o,modelStatus:t},isDeleted:t===et.GJ.Deleted,mode:"navigation",onUpdateScreenshot:()=>{d({sliceFilterFn:t=>t.filter(t=>t.model.id===e.model.id)})},slice:e,variant:"solid"})}}),(0,i.jsx)(ee.Z,{slices:u(h),defaultVariationSelector:x})]})]}),(0,i.jsx)(j.S,{children:(0,i.jsx)(a.Suspense,{children:(0,i.jsx)(ei,{})})})]})})};var er=n(56580),el=n(47861),eo=n(79797),ea=n(76805);let ec=e=>{let{isOpen:t,title:n,footer:s,explanations:r,onClose:l}=e;return(0,i.jsx)(eo.Z,{placement:"right",open:t,level:null,onClose:l,width:496,children:(0,i.jsx)(ea.Z,{radius:"0px",bodySx:{bg:"white",padding:24,flex:1,display:"flex",flexDirection:"column",overflow:"scroll"},footerSx:{p:0},sx:{flexDirection:"column",display:"flex",height:"100%",border:"none"},borderFooter:!0,Header:(0,i.jsxs)(P.kC,{sx:{p:"16px",alignItems:"center",justifyContent:"space-between",borderBottom:e=>{var t;return"1px solid ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.borders))}},children:[(0,i.jsx)(P.kC,{sx:{alignItems:"center"},children:(0,i.jsx)(P.X6,{sx:{fontSize:"14px",fontWeight:"bold",ml:1},children:n})}),(0,i.jsx)(P.x8,{type:"button",onClick:()=>l()})]}),Footer:()=>(0,i.jsx)(P.kC,{sx:{flexDirection:"column",justifyContent:"center",alignItems:"center",paddingRight:16,borderTop:e=>{var t;return"1px solid ".concat(String(null===(t=e.colors)||void 0===t?void 0:t.darkBorders))},backgroundColor:"white",padding:20},children:s}),children:r})})};var ed=n(40572);n(77507);let eu=e=>{let{ctName:t,numberOfDocuments:n,link:s,isOverLimit:r=!1}=e;return(0,i.jsxs)(P.Zb,{sx:{mb:12},variant:"drawerCard","data-testid":"AssociatedDocumentsCard-".concat(t),children:[(0,i.jsxs)(P.kC,{sx:{flexDirection:"column"},children:[(0,i.jsx)(P.xv,{children:t}),(0,i.jsxs)(P.xv,{sx:{color:"textClear",fontSize:"12px",lineHeight:"16px"},children:[n," documents"]})]}),(0,i.jsx)(P.rU,{href:s,target:"_blank",variant:"cardSmall",sx:{color:r?"danger":"purple08"},children:"View documents"})]})},ex=e=>{let{pushChanges:t,modalData:n,onClose:s}=e,{remoteOnlyCustomTypes:r}=(0,er.v9)(e=>({remoteOnlyCustomTypes:(0,ed.Ch)(e).filter(J.yp)}));if((null==n?void 0:n.type)!=="HARD")return null;let l=n.details.customTypes.map(e=>{var t;let n=r.find(t=>(0,J.n5)(t)===e.id);return void 0===n?null:(0,i.jsx)(eu,{isOverLimit:!0,ctName:null!==(t=n.remote.label)&&void 0!==t?t:n.remote.id,link:e.url,numberOfDocuments:e.numberOfDocuments},e.id)});return(0,i.jsx)(ec,{isOpen:"HARD"===n.type,title:"Manual action required",onClose:s,footer:(0,i.jsx)(el.z,{label:"Try again",variant:"primary",onClick:()=>{t(!1)},sx:{fontWeight:"bold",color:"white",borderRadius:6,width:"100%"}}),explanations:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(P.xv,{sx:{fontWeight:"bold",mb:1,lineHeight:"24px"},children:["Your type",n.details.customTypes.length>1&&"s"," cannot be deleted."]}),(0,i.jsxs)(P.xv,{sx:{mb:24},children:[n.details.customTypes.length>1?"These types have":"This type has"," ","too many associated Documents. Archive and delete these Documents manually and then try deleting the types again."]}),l]})})},eh=e=>{let{onToggle:t,isConfirmed:n,sx:s}=e;return(0,i.jsxs)(P.kC,{sx:{borderRadius:6,flexDirection:"column",backgroundColor:"grey03",padding:12,width:"100%",...s},children:[(0,i.jsx)(P.xv,{sx:{fontWeight:"bold",mb:2},children:"Are you sure to proceed?"}),(0,i.jsxs)(P.__,{sx:{mt:"4px",py:1},variant:"large",children:[(0,i.jsx)(P.XZ,{defaultChecked:n,onChange:t,variant:"forms.checkbox.dark"}),"Delete these Documents"]})]})},em=e=>{let{pushChanges:t,modalData:n,onClose:s}=e,[r,l]=(0,a.useState)(!1),{remoteOnlyCustomTypes:o}=(0,er.v9)(e=>({remoteOnlyCustomTypes:(0,ed.Ch)(e).filter(J.yp)}));if((null==n?void 0:n.type)!=="SOFT")return null;let c=n.details.customTypes.map(e=>{var t;let n=o.find(t=>(0,J.n5)(t)===e.id);return void 0===n?null:(0,i.jsx)(eu,{isOverLimit:!0,ctName:null!==(t=n.remote.label)&&void 0!==t?t:n.remote.id,link:e.url,numberOfDocuments:e.numberOfDocuments},e.id)});return(0,i.jsx)(ec,{isOpen:"SOFT"===n.type,title:"Confirm deletion",onClose:s,footer:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eh,{onToggle:()=>{l(!r)},isConfirmed:r,sx:{mb:10}}),(0,i.jsx)(el.z,{label:"Push changes",variant:"primary",onClick:()=>{t(r)},disabled:!r,sx:{fontWeight:"bold",color:"white",borderRadius:6,width:"100%"}})]}),explanations:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(P.xv,{sx:{fontWeight:"bold",mb:1,lineHeight:"24px"},children:"This action will also delete Documents."}),(0,i.jsxs)(P.xv,{sx:{mb:24},children:[n.details.customTypes.length>1?"These types have":"This type has"," ","associated Documents, which will also be deleted. This might create broken links in your repository."]}),c]})})},eg=e=>"https://".concat(e,".prismic.io/documents/working");var ep=()=>{let{unSyncedSlices:e,unSyncedCustomTypes:t,changedCustomTypes:n,changedSlices:r,modelsStatuses:h}=(0,R.X)(),g=(0,O.L)(),p=(0,B.n)(),{pushChangesSuccess:j,refreshState:f}=(0,H.Z)(),[v,y]=(0,a.useState)(!1),[b,w]=(0,a.useState)(void 0),{autoSyncStatus:k}=(0,L.g)(),S=(0,o.useRouter)(),[T,z]=(0,a.useState)(!1),[P,Z]=(0,a.useState)(!1),{repositoryName:G}=(0,I.U)(),{completeStep:M}=(0,_.k)(),W=eg(G),X=e.length+t.length;(0,a.useEffect)(()=>{("synced"===k||"failed"===k||"syncing"===k)&&S.push("/")},[k,S]);let U=async e=>{try{y(!0),w(void 0);let t=await (0,D.t)({confirmDeleteDocuments:e,changedCustomTypes:n,changedSlices:r});if(void 0!==t)w(t);else{let e=await (0,u.y0)();f(e),j(),z(!0),Z(!0),M("reviewAndPush")}}catch(e){console.error("Something went wrong when manually pushing your changes",e),c.Am.error("Something went wrong when pushing your changes. Check your terminal logs.")}y(!1)},Q=(0,a.useMemo)(()=>g?p===F.t.UNAUTHORIZED||p===F.t.FORBIDDEN?(0,i.jsx)(E,{authStatus:p}):0===X?(0,i.jsx)(m,{isPostPush:T,documentsListEndpoint:W}):(0,i.jsx)(es,{unSyncedSlices:e,unSyncedCustomTypes:t,modelsStatuses:h,authStatus:p,isOnline:g}):(0,i.jsx)(A,{}),[g,p,X,e,t,h,T,W]);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(l(),{children:(0,i.jsx)("title",{children:"Changes - Slice Machine"})}),(0,i.jsxs)(N.LN,{children:[(0,i.jsxs)(N.wd,{children:[(0,i.jsx)(N.Cx,{children:(0,i.jsx)(x.g,{children:"Changes"})}),(0,i.jsxs)(N.K2,{children:[(0,i.jsx)(C,{disabled:0===X||!g||p===F.t.UNAUTHORIZED||p===F.t.FORBIDDEN||v,loading:v,onClick:()=>{U(!1)}}),(0,i.jsx)(s.FNi,{anchor:(0,i.jsx)(s.xuv,{position:"fixed",top:32,right:32,width:322}),open:P,variant:"card",seconds:20,title:"Success! \uD83C\uDF89",subtitle:"Your changes have been pushed.",action:{title:"Create content in the Page Builder",onClick:()=>{u.Xe.track({event:"post-push:toast-cta-clicked"}),window.open(W,"_blank")}},cancel:{onClick:()=>Z(!1)},onOpenChange:Z})]})]}),(0,i.jsx)(N.RN,{children:(0,i.jsxs)(d.xR,{sx:{display:"flex",flexDirection:"column"},children:[Q,(0,i.jsx)(em,{pushChanges:e=>void U(e),modalData:b,onClose:()=>w(void 0)}),(0,i.jsx)(ex,{pushChanges:e=>void U(e),modalData:b,onClose:()=>w(void 0)})]})})]})]})}},43217:function(e){e.exports={column:"BlankSlate_column__genEe",root:"BlankSlate_root__CmSqW BlankSlate_column__genEe",fadeIn:"BlankSlate_fadeIn__mAfi5",withBackground:"BlankSlate_withBackground__mLYij",image:"BlankSlate_image__Jn90S BlankSlate_column__genEe",content:"BlankSlate_content__0Yt2d BlankSlate_column__genEe",desc:"BlankSlate_desc___Dl7e",actions:"BlankSlate_actions__OYRj4"}}},function(e){e.O(0,[898,789,123,918,772,639,888,774,179],function(){return e(e.s=21985)}),_N_E=e.O()}]);